@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {

  a,
  button {
    @apply pointer-events-auto;
  }

  /* Hide scrollbar but keep scroll functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
    /* Chrome, Safari, Opera */
  }
}

@layer components {
  .index-container {
    @apply w-full px-4 lg:px-0 lg:mx-auto lg:w-idx;
  }

  .permalink-container {
    @apply w-full px-4 lg:px-0;
    /* 모바일/태블릿: 720px 제한 */
    max-width: min(720px, 100%);
    margin: 0 auto;
  }

  @media (min-width: 1280px) {
    .permalink-container {
      /* xl: 본문 720px, 중앙 정렬 */
      max-width: 720px;
      padding: 0;
      margin: 0 auto;
    }
  }

  .cover-cols-1 {
    @apply grid grid-cols-1;
  }

  .cover-cols-2 {
    @apply cover-cols-1 sm:grid-cols-2;
  }

  .cover-cols-3 {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }

  .cover-button {
    @apply flex;
  }

  .cover-fullscreen {
    @apply w-full h-screen;
  }

  /* https://fontawesome.com/ */
  .font-awesome {
    @apply font-['Font_Awesome_6_Free'] leading-none not-italic inline-block;
  }

  .fa-chevron-right {
    @apply font-awesome font-bold content-['\f105'];
  }

  .fa-circle-arrow-right {
    @apply font-awesome font-bold content-['\f0a9'];
  }

  .fa-circle-arrow-down {
    @apply font-awesome font-bold content-['\f0ab'];
  }

  .fa-heart {
    @apply font-awesome font-bold content-['\f004'];
  }

  .fa-share-nodes {
    @apply font-awesome font-bold content-['\f1e0'];
  }

  .fa-chart-pie {
    @apply font-awesome font-bold content-['\f200'];
  }

  .fa-wrench {
    @apply font-awesome font-bold content-['\f0ad'];
  }

  .fa-ellipsis {
    @apply font-awesome font-bold content-['\f141'];
  }

  .fa-tag {
    @apply font-awesome font-bold content-['\f02b'];
  }

  .fa-star {
    @apply font-awesome content-['\f005'];
  }

  .fa-paper-plane {
    @apply font-awesome font-bold content-['\f1d8'];
  }

  .fa-lock {
    @apply font-awesome font-bold content-['\f023'];
  }

  .fa-lock-open {
    @apply font-awesome font-bold content-['\f3c1'];
  }

  .fa-mug-saucer {
    @apply font-awesome font-bold content-['\f0f4'];
  }

  .fa-triangle-exclamation {
    @apply font-awesome font-bold content-['\f071'];
  }

  .fa-xmark {
    @apply font-awesome font-bold content-['\f00d'];
  }

  .fa-ellipsis-vertical {
    @apply font-awesome font-bold content-['\f142'];
  }

  .fa-thumbtack {
    @apply font-awesome font-bold content-['\f08d'];
  }
}

@layer utilities {
  .text-hidden {
    @apply absolute w-px h-px -m-px overflow-hidden !important;
  }

  .text-overflow-hidden {
    @apply overflow-hidden whitespace-nowrap text-ellipsis;
  }

  /* https://github.com/aFarkas/lazysizes#css-api */
  .lazyload,
  .lazyloading {
    @apply animate-pulse bg-h-300 dark:bg-h-700;
  }

  .lazyload:not([src]) {
    @apply invisible;
  }

  .lazyloaded {
    @apply animate-none bg-h-100;
  }
}

/* highlight.js 코드 블록 스타일 */
.code-block-wrapper {
  background-color: #282c34;
  border-radius: 0.5rem;
  overflow: hidden;
  margin: 1.5rem 0;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Code Block Header (Google-style) */
.code-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 1rem;
  background-color: #21252b;
  border-bottom: 1px solid #181a1f;
}

.code-language {
  font-size: 0.75rem;
  font-weight: 600;
  color: #abb2bf;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.code-copy-button {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.375rem;
  color: #abb2bf;
  background-color: transparent;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0.25rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.code-copy-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: #fff;
  border-color: rgba(255, 255, 255, 0.3);
}

.code-copy-button svg {
  width: 16px;
  height: 16px;
}

/* highlight.js Pre Styles */
.code-block-wrapper pre {
  margin: 0 !important;
  padding: 0.25rem !important;
  overflow-x: auto;
  background-color: #282c34 !important;
  font-family: 'D2Coding', 'D2Coding ligature', 'Source Code Pro', monospace;
  font-size: 0.95rem;
  line-height: 1.0;
  tab-size: 4;
  -moz-tab-size: 4;
}

.code-block-wrapper pre code {
  display: block;
  background-color: transparent !important;
  padding: 0;
}

/* Custom Scrollbar for Code Blocks */
.code-block-wrapper pre::-webkit-scrollbar {
  height: 8px;
  background-color: #282c34;
}

.code-block-wrapper pre::-webkit-scrollbar-track {
  background-color: #282c34;
  border-radius: 4px;
}

.code-block-wrapper pre::-webkit-scrollbar-thumb {
  background-color: #5c6370;
  border-radius: 4px;
}

.code-block-wrapper pre::-webkit-scrollbar-thumb:hover {
  background-color: #abb2bf;
}

/* Dark Mode Selection Consistency */
.code-block-wrapper pre code ::selection {
  background-color: #3e4451;
  color: inherit;
}

/* Bottom Floating Bar */
#bottom .btn {
  @apply flex justify-center items-center w-10 h-10 p-0 rounded-full outline-0 bg-h-200 text-h-500 shadow-none hover:bg-h-300;
  @apply dark:text-h-200 dark:bg-h-700 dark:hover:bg-h-600;
}

#bottom .btn .txt {
  @apply text-hidden;
}

#bottom .btn .ico {
  @apply text-base;
}

/* ===== 사이드바 링크 아이콘 스타일 ===== */
/* 기본 아이콘 숨기기 (커스텀 아이콘 있을 때) */
#my-links a[title="밀로(MILLO)"] .ico,
#my-links a[title="Project"] .ico,
#my-links a[title="GitHub"] .ico {
  display: none;
}

/* GitHub 아이콘 (Font Awesome) */
#my-links a[title="GitHub"]::before {
  font-family: "Font Awesome 6 Brands";
  content: "\f09b";
  font-size: 1.5rem;
  font-weight: 400;
}

/* 커스텀 이미지 아이콘 */
#my-links a[title="밀로(MILLO)"]::before {
  content: "";
  width: 24px;
  height: 24px;
  display: inline-block;
  vertical-align: middle;
  background: url("https://tistory1.daumcdn.net/tistory/6976895/skin/images/millo.png") center/cover no-repeat;
  border-radius: 4px;
}

#my-links a[title="Project"]::before {
  content: "";
  width: 24px;
  height: 24px;
  display: inline-block;
  vertical-align: middle;
  background: url("https://tistory1.daumcdn.net/tistory/6976895/skin/images/virtue.png") center/cover no-repeat;
  border-radius: 4px;
}

/* ===== 화면 크기별 게시물 개수 제한 ===== */
/* 웹 (lg+): 9개 모두 표시 */
/* 태블릿/2열 (sm~lg): 8개까지 표시 */
/* 모바일/1열 (~sm): 5개까지 표시 */

/* 1열 모드 (~640px): 6번째 이후 숨김 */
@media (max-width: 639px) {

  [data-list-style=gallery] .post:nth-child(n+6),
  [data-list-style=grid] .post:nth-child(n+6) {
    display: none;
  }
}

/* 2열 모드 (640px~1023px): 9번째 이후 숨김 */
@media (min-width: 640px) and (max-width: 1023px) {

  [data-list-style=gallery] .post:nth-child(n+9),
  [data-list-style=grid] .post:nth-child(n+9) {
    display: none;
  }
}

/* ===== 보기 전환 버튼 ===== */
#list .view-toggle {
  grid-column: 1 / -1;
  /* 그리드 모드에서 전체 너비 차지 */
  width: 100%;
  display: flex;
  justify-content: flex-end;
  gap: 0.25rem;
  margin-bottom: 1rem;
}

/* 리스트 모드: index-container와 동일한 스타일 적용 */
[data-list-style=list] .view-toggle {
  width: 100%;
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (min-width: 1024px) {
  [data-list-style=list] .view-toggle {
    padding-left: 0;
    padding-right: 0;
    margin-left: auto;
    margin-right: auto;
    width: var(--h-idx, 100%);
  }
}